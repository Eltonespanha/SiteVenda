<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Loja de Santos em Gesso, Resina e Velas</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
    }

    body {
      background: #f5f5f7;
      color: #222;
    }

    header {
      background: #222;
      color: #fff;
      padding: 16px 24px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      position: sticky;
      top: 0;
      z-index: 10;
    }

    header h1 {
      font-size: 20px;
    }

    .cart-button {
      background: #ffcc00;
      color: #222;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
      font-weight: bold;
    }

    .cart-button span {
      margin-left: 6px;
    }

    .container {
      display: grid;
      grid-template-columns: 260px 1fr;
      gap: 24px;
      padding: 24px;
    }

    @media (max-width: 900px) {
      .container {
        grid-template-columns: 1fr;
      }
    }

    /* Sidebar filtros */
    .sidebar {
      background: #fff;
      padding: 16px;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.08);
      position: sticky;
      top: 80px;
      height: fit-content;
    }

    .sidebar h2 {
      font-size: 18px;
      margin-bottom: 12px;
    }

    .sidebar-section {
      margin-bottom: 16px;
    }

    .sidebar-section h3 {
      font-size: 14px;
      margin-bottom: 8px;
      text-transform: uppercase;
      color: #555;
    }

    .sidebar-section label {
      display: block;
      font-size: 14px;
      margin-bottom: 4px;
      cursor: pointer;
    }

    .sidebar input[type="checkbox"],
    .sidebar input[type="radio"] {
      margin-right: 6px;
    }

    .price-range {
      display: flex;
      gap: 8px;
    }

    .price-range input {
      width: 100%;
      padding: 6px;
      border-radius: 4px;
      border: 1px solid #ccc;
      font-size: 13px;
    }

    .btn-clear {
      margin-top: 8px;
      font-size: 13px;
      background: #eee;
      border: none;
      padding: 6px 10px;
      border-radius: 4px;
      cursor: pointer;
    }

    /* Conteúdo principal */
    .main-content {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .toolbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
      flex-wrap: wrap;
    }

    .search-box input {
      padding: 8px;
      border-radius: 4px;
      border: 1px solid #ccc;
      width: 240px;
      max-width: 100%;
    }

    .sort-select {
      padding: 8px;
      border-radius: 4px;
      border: 1px solid #ccc;
      font-size: 14px;
    }

    .product-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 16px;
    }

    .product-card {
      background: #fff;
      border-radius: 8px;
      padding: 12px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.08);
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }

    .product-image {
      background: linear-gradient(135deg, #f9f9f9, #ececec);
      height: 160px;
      border-radius: 6px;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      text-align: center;
      color: #666;
      padding: 8px;
    }

    .product-name {
      font-weight: bold;
      margin-bottom: 4px;
      font-size: 14px;
    }

    .product-category,
    .product-material {
      font-size: 12px;
      color: #666;
      margin-bottom: 2px;
    }

    .product-price {
      margin-top: 8px;
      font-size: 16px;
      font-weight: bold;
      color: #c0392b;
    }

    .product-actions {
      margin-top: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
    }

    .btn-add {
      flex: 1;
      background: #2ecc71;
      color: #fff;
      border: none;
      padding: 8px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 13px;
      font-weight: bold;
    }

    .btn-add:hover {
      background: #27ae60;
    }

    .badge {
      font-size: 11px;
      padding: 2px 6px;
      border-radius: 4px;
      background: #eee;
      color: #555;
    }

    /* Modal carrinho */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.5);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 20;
    }

    .modal {
      background: #fff;
      max-width: 480px;
      width: 100%;
      border-radius: 8px;
      padding: 16px;
      max-height: 80vh;
      overflow-y: auto;
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
    }

    .modal-header h2 {
      font-size: 18px;
    }

    .modal-close {
      background: transparent;
      border: none;
      font-size: 18px;
      cursor: pointer;
    }

    .cart-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
      padding-bottom: 8px;
      border-bottom: 1px solid #eee;
      font-size: 14px;
    }

    .cart-item span {
      display: block;
    }

    .cart-qty {
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .cart-qty button {
      width: 22px;
      height: 22px;
      border-radius: 4px;
      border: 1px solid #ccc;
      background: #f5f5f5;
      cursor: pointer;
    }

    .cart-summary {
      margin-top: 12px;
      font-size: 14px;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .btn-checkout {
      margin-top: 12px;
      width: 100%;
      background: #3498db;
      color: #fff;
      border: none;
      padding: 10px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      font-weight: bold;
    }

    .checkout-form {
      margin-top: 12px;
      border-top: 1px solid #eee;
      padding-top: 12px;
      display: none;
      font-size: 14px;
    }

    .checkout-form label {
      display: block;
      margin-bottom: 6px;
    }

    .checkout-form input,
    .checkout-form textarea {
      width: 100%;
      padding: 6px;
      border-radius: 4px;
      border: 1px solid #ccc;
      margin-top: 2px;
      font-size: 13px;
    }

    .checkout-form textarea {
      resize: vertical;
    }

    .btn-finish {
      margin-top: 10px;
      width: 100%;
      background: #27ae60;
      color: #fff;
      border: none;
      padding: 10px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      font-weight: bold;
    }

    .empty-text {
      font-size: 14px;
      color: #666;
    }
  </style>
</head>
<body>
  <header>
    <h1>Marketplace de Santos & Velas</h1>
    <button class="cart-button" id="openCart">
      Carrinho <span id="cartCount">(0)</span>
    </button>
  </header>

  <div class="container">
    <!-- FILTROS -->
    <aside class="sidebar">
      <h2>Filtros</h2>

      <div class="sidebar-section">
        <h3>Categorias</h3>
        <label><input type="checkbox" class="filter-category" value="santo"> Santos</label>
        <label><input type="checkbox" class="filter-category" value="vela"> Velas</label>
        <label><input type="checkbox" class="filter-category" value="kit"> Kits</label>
      </div>

      <div class="sidebar-section">
        <h3>Material</h3>
        <label><input type="checkbox" class="filter-material" value="gesso"> Gesso</label>
        <label><input type="checkbox" class="filter-material" value="resina"> Resina</label>
        <label><input type="checkbox" class="filter-material" value="parafina"> Parafina</label>
      </div>

      <div class="sidebar-section">
        <h3>Faixa de preço</h3>
        <div class="price-range">
          <input type="number" id="minPrice" placeholder="Mín" min="0" />
          <input type="number" id="maxPrice" placeholder="Máx" min="0" />
        </div>
        <button class="btn-clear" id="clearPrice">Limpar preço</button>
      </div>

      <button class="btn-clear" id="clearAll">Limpar todos os filtros</button>
    </aside>

    <!-- PRODUTOS -->
    <main class="main-content">
      <div class="toolbar">
        <div class="search-box">
          <input type="text" id="searchInput" placeholder="Buscar por nome, santo, etc..." />
        </div>
        <select id="sortSelect" class="sort-select">
          <option value="default">Ordenar</option>
          <option value="price-asc">Menor preço</option>
          <option value="price-desc">Maior preço</option>
          <option value="name-asc">Nome (A-Z)</option>
          <option value="name-desc">Nome (Z-A)</option>
        </select>
      </div>

      <div class="product-grid" id="productGrid">
        <!-- Produtos gerados via JS -->
      </div>
    </main>
  </div>

  <!-- MODAL CARRINHO -->
  <div class="modal-overlay" id="cartModal">
    <div class="modal">
      <div class="modal-header">
        <h2>Seu carrinho</h2>
        <button class="modal-close" id="closeCart">&times;</button>
      </div>
      <div id="cartItems"></div>
      <div class="cart-summary">
        <span><strong>Subtotal:</strong> R$ <span id="cartSubtotal">0,00</span></span>
      </div>
      <button class="btn-checkout" id="startCheckout">Ir para checkout</button>

      <form class="checkout-form" id="checkoutForm">
        <h3>Dados para o pedido</h3>
        <label>
          Nome completo
          <input type="text" id="nameInput" required />
        </label>
        <label>
          WhatsApp
          <input type="text" id="whatsInput" required />
        </label>
        <label>
          Endereço completo
          <textarea id="addressInput" rows="3" required></textarea>
        </label>
        <label>
          Observações (opcional)
          <textarea id="noteInput" rows="2"></textarea>
        </label>
        <button type="button" class="btn-finish" id="finishOrder">
          Finalizar pedido (simulação)
        </button>
      </form>
    </div>
  </div>

  <script>
    // Produtos de exemplo (você pode depois puxar de um back-end ou JSON)
    const products = [
      {
        id: 1,
        name: "Santo Antônio em Gesso 20cm",
        category: "santo",
        material: "gesso",
        price: 39.9,
        tag: "Santo Antônio, casamentos"
      },
      {
        id: 2,
        name: "Nossa Senhora Aparecida em Resina 25cm",
        category: "santo",
        material: "resina",
        price: 79.9,
        tag: "Aparecida, padroeira do Brasil"
      },
      {
        id: 3,
        name: "Sagrado Coração de Jesus em Gesso 30cm",
        category: "santo",
        material: "gesso",
        price: 89.9,
        tag: "Sagrado Coração"
      },
      {
        id: 4,
        name: "Kit 3 Velas Decorativas Brancas",
        category: "kit",
        material: "parafina",
        price: 29.9,
        tag: "velas, decoração"
      },
      {
        id: 5,
        name: "Vela Perfumada de Igreja (Baunilha)",
        category: "vela",
        material: "parafina",
        price: 19.9,
        tag: "perfumada"
      },
      {
        id: 6,
        name: "Nossa Senhora das Graças em Resina 18cm",
        category: "santo",
        material: "resina",
        price: 69.9,
        tag: "Nossa Senhora das Graças"
      },
      {
        id: 7,
        name: "Kit Santos Pequenos em Gesso (5 peças)",
        category: "kit",
        material: "gesso",
        price: 119.9,
        tag: "kit, mini santos"
      },
      {
        id: 8,
        name: "Vela 7 Dias - Branca",
        category: "vela",
        material: "parafina",
        price: 9.9,
        tag: "vela 7 dias"
      }
    ];

    let filteredProducts = [...products];
    let cart = [];

    const productGrid = document.getElementById("productGrid");
    const searchInput = document.getElementById("searchInput");
    const sortSelect = document.getElementById("sortSelect");
    const minPrice = document.getElementById("minPrice");
    const maxPrice = document.getElementById("maxPrice");
    const clearPrice = document.getElementById("clearPrice");
    const clearAll = document.getElementById("clearAll");
    const categoryCheckboxes = document.querySelectorAll(".filter-category");
    const materialCheckboxes = document.querySelectorAll(".filter-material");

    const cartModal = document.getElementById("cartModal");
    const openCart = document.getElementById("openCart");
    const closeCart = document.getElementById("closeCart");
    const cartItems = document.getElementById("cartItems");
    const cartSubtotal = document.getElementById("cartSubtotal");
    const cartCount = document.getElementById("cartCount");
    const startCheckout = document.getElementById("startCheckout");
    const checkoutForm = document.getElementById("checkoutForm");
    const finishOrder = document.getElementById("finishOrder");

    function formatPrice(value) {
      return value.toFixed(2).replace(".", ",");
    }

    function renderProducts() {
      productGrid.innerHTML = "";
      if (filteredProducts.length === 0) {
        productGrid.innerHTML = "<p class='empty-text'>Nenhum produto encontrado com os filtros selecionados.</p>";
        return;
      }

      filteredProducts.forEach((product) => {
        const card = document.createElement("div");
        card.className = "product-card";

        card.innerHTML = `
          <div>
            <div class="product-image">
              Imagem ilustrativa do produto<br>${product.name}
            </div>
            <div class="product-name">${product.name}</div>
            <div class="product-category">Categoria: ${labelCategory(product.category)}</div>
            <div class="product-material">Material: ${labelMaterial(product.material)}</div>
            <div class="product-price">R$ ${formatPrice(product.price)}</div>
          </div>
          <div class="product-actions">
            <span class="badge">${product.tag}</span>
            <button class="btn-add" data-id="${product.id}">Adicionar</button>
          </div>
        `;

        productGrid.appendChild(card);
      });

      document.querySelectorAll(".btn-add").forEach((btn) => {
        btn.addEventListener("click", () => {
          const id = parseInt(btn.getAttribute("data-id"));
          addToCart(id);
        });
      });
    }

    function labelCategory(cat) {
      if (cat === "santo") return "Santo";
      if (cat === "vela") return "Vela";
      if (cat === "kit") return "Kit";
      return cat;
    }

    function labelMaterial(mat) {
      if (mat === "gesso") return "Gesso";
      if (mat === "resina") return "Resina";
      if (mat === "parafina") return "Parafina";
      return mat;
    }

    function applyFilters() {
      const searchTerm = searchInput.value.toLowerCase().trim();

      const selectedCategories = Array.from(categoryCheckboxes)
        .filter((c) => c.checked)
        .map((c) => c.value);

      const selectedMaterials = Array.from(materialCheckboxes)
        .filter((m) => m.checked)
        .map((m) => m.value);

      const min = parseFloat(minPrice.value) || 0;
      const max = parseFloat(maxPrice.value) || Infinity;

      filteredProducts = products.filter((p) => {
        const matchesSearch =
          p.name.toLowerCase().includes(searchTerm) ||
          p.tag.toLowerCase().includes(searchTerm);

        const matchesCategory =
          selectedCategories.length === 0 || selectedCategories.includes(p.category);

        const matchesMaterial =
          selectedMaterials.length === 0 || selectedMaterials.includes(p.material);

        const matchesPrice = p.price >= min && p.price <= max;

        return matchesSearch && matchesCategory && matchesMaterial && matchesPrice;
      });

      applySort();
      renderProducts();
    }

    function applySort() {
      const sort = sortSelect.value;
      if (sort === "price-asc") {
        filteredProducts.sort((a, b) => a.price - b.price);
      } else if (sort === "price-desc") {
        filteredProducts.sort((a, b) => b.price - a.price);
      } else if (sort === "name-asc") {
        filteredProducts.sort((a, b) => a.name.localeCompare(b.name));
      } else if (sort === "name-desc") {
        filteredProducts.sort((a, b) => b.name.localeCompare(a.name));
      }
    }

    function clearFilters() {
      searchInput.value = "";
      minPrice.value = "";
      maxPrice.value = "";
      categoryCheckboxes.forEach((c) => (c.checked = false));
      materialCheckboxes.forEach((m) => (m.checked = false));
      filteredProducts = [...products];
      sortSelect.value = "default";
      renderProducts();
    }

    function addToCart(id) {
      const product = products.find((p) => p.id === id);
      if (!product) return;

      const existing = cart.find((item) => item.id === id);
      if (existing) {
        existing.qty += 1;
      } else {
        cart.push({ ...product, qty: 1 });
      }
      updateCartUI();
    }

    function updateCartUI() {
      cartItems.innerHTML = "";
      if (cart.length === 0) {
        cartItems.innerHTML = "<p class='empty-text'>Seu carrinho está vazio.</p>";
      } else {
        cart.forEach((item) => {
          const row = document.createElement("div");
          row.className = "cart-item";

          row.innerHTML = `
            <div>
              <span><strong>${item.name}</strong></span>
              <span>R$ ${formatPrice(item.price)} cada</span>
            </div>
            <div class="cart-qty">
              <button data-id="${item.id}" data-action="minus">-</button>
              <span>${item.qty}</span>
              <button data-id="${item.id}" data-action="plus">+</button>
            </div>
          `;

          cartItems.appendChild(row);
        });

        cartItems.querySelectorAll("button").forEach((btn) => {
          btn.addEventListener("click", () => {
            const id = parseInt(btn.getAttribute("data-id"));
            const action = btn.getAttribute("data-action");
            changeCartQty(id, action);
          });
        });
      }

      const subtotal = cart.reduce((sum, item) => sum + item.price * item.qty, 0);
      cartSubtotal.textContent = formatPrice(subtotal);
      const totalQty = cart.reduce((sum, item) => sum + item.qty, 0);
      cartCount.textContent = `(${totalQty})`;
    }

    function changeCartQty(id, action) {
      const item = cart.find((i) => i.id === id);
      if (!item) return;

      if (action === "plus") item.qty += 1;
      if (action === "minus") item.qty -= 1;
      if (item.qty <= 0) {
        cart = cart.filter((i) => i.id !== id);
      }
      updateCartUI();
    }

    // Eventos
    searchInput.addEventListener("input", applyFilters);
    sortSelect.addEventListener("change", () => {
      applySort();
      renderProducts();
    });
    minPrice.addEventListener("input", applyFilters);
    maxPrice.addEventListener("input", applyFilters);
    clearPrice.addEventListener("click", () => {
      minPrice.value = "";
      maxPrice.value = "";
      applyFilters();
    });
    clearAll.addEventListener("click", clearFilters);
    categoryCheckboxes.forEach((c) => c.addEventListener("change", applyFilters));
    materialCheckboxes.forEach((m) => m.addEventListener("change", applyFilters));

    // Modal carrinho
    openCart.addEventListener("click", () => {
      cartModal.style.display = "flex";
    });
    closeCart.addEventListener("click", () => {
      cartModal.style.display = "none";
      checkoutForm.style.display = "none";
    });
    cartModal.addEventListener("click", (e) => {
      if (e.target === cartModal) {
        cartModal.style.display = "none";
        checkoutForm.style.display = "none";
      }
    });

    startCheckout.addEventListener("click", () => {
      if (cart.length === 0) {
        alert("Seu carrinho está vazio.");
        return;
      }
      checkoutForm.style.display = "block";
    });

    finishOrder.addEventListener("click", () => {
      if (!document.getElementById("nameInput").value ||
          !document.getElementById("whatsInput").value ||
          !document.getElementById("addressInput").value) {
        alert("Preencha todos os campos obrigatórios.");
        return;
      }

      alert("Pedido finalizado (simulação). Aqui você pode integrar com WhatsApp ou pagamento online.");
      cart = [];
      updateCartUI();
      checkoutForm.style.display = "none";
      cartModal.style.display = "none";
    });

    // Inicialização
    renderProducts();
    updateCartUI();
  </script>
</body>
</html>